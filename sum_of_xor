n & (n%2 ? 0 : ~0) | ( ((n & 2)>>1) ^ (n & 1) )
